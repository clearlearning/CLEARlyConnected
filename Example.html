<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CLEAR-ly Connected</title>

    <!-- Preload font for better performance -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" as="style" onload="this.rel='stylesheet'">
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    </noscript>

    <link rel="icon" type="image/png"
          href="https://assets-002.noviams.com/novi-file-uploads/clear/structure/clearlogo.png">

    <style>
        /* Reset and variables (preserve your original palette & design) */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root{
            --primary-burgundy: #64092c;
            --primary-gold: #dda839;
            --secondary-gray: #484848;
            --secondary-blue: #084d78;
            --bg-dark: #1a1a1a;
            --bg-light: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #000;
            --text-light: #666;
            --border-color: #e0e0e0;
            --shadow: 0 8px 32px rgba(0,0,0,0.1);
            --shadow-hover: 0 16px 48px rgba(0,0,0,0.15);
            --sidebar-width: 280px;
            --sidebar-mobile-width: 220px;
            --touch-target: 44px; /* recommended touch size */
        }

        body {
            font-family: 'Open Sans', Aptos, Arial, sans-serif;
            color: var(--text-color);
            background: #FDFAF5;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            overflow-x: hidden;
        }

        /* --- Dashboard layout (desktop) --- */
        .dashboard {
            display: grid;
            grid-template-columns: var(--sidebar-width) 1fr;
            min-height: 100vh;
            gap: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* Sidebar */
        .sidebar {
            background: #f3dfb5;
            padding: 20px;
            box-shadow: 4px 0 20px rgba(0,0,0,0.08);
            position: relative;
            overflow-y: auto;
            transition: transform 0.28s cubic-bezier(.2,.9,.2,1);
        }

        .logo-section { text-align: center; margin-bottom: 30px; padding-bottom: 12px; }
        .logo {
            width: 80px; height: 80px;
            background-image: url('https://assets-002.noviams.com/novi-file-uploads/clear/structure/clearlogo.png');
            background-size: contain; background-repeat: no-repeat; background-position: center;
            border-radius: 50%;
            margin: 0 auto 12px;
            box-shadow: 0 6px 20px rgba(221,168,57,0.28);
            transition: transform .3s ease;
        }
        .logo:hover { transform: scale(1.06) rotate(3deg); }

        .org-name { font-size: 1.05rem; font-weight: 600; color:#000; }
        .tagline { font-size: .9rem; color:#000; opacity: .8; }

        .nav-menu { list-style: none; margin-top: 12px; border-top: 2px solid rgba(255,255,255,0.12); padding-top: 12px; }
        .nav-item { margin-bottom: 8px; }
        .nav-link {
            display:flex;
            align-items:center;
            gap:10px;
            padding: 12px 14px;
            color: #000;
            text-decoration: none;
            border-radius: 8px;
            transition: all .22s ease;
            cursor: pointer;
            user-select: none;
        }
        .nav-link .nav-icon { width: 22px; font-size: 1.05rem; }
        .nav-link:hover, .nav-link.active {
            background: rgba(255,255,255,0.45);
            transform: translateX(6px);
        }

        .social-grid { display:flex; gap:12px; margin-top:18px; justify-content:center; }
        .social-btn img { width: 28px; height: auto; display:block; }

        /* Main content */
        .main-content {
            display:flex;
            justify-content:center;
            align-items:flex-start;
            width:100%;
            min-height:100vh;
        }
        .body {
            width: 100%;
            max-width: 1200px;
            padding: 24px;
        }

        /* Sections (preserve original animations) */
        .content-section { display: none; animation: fadeIn .45s ease; }
        .content-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(18px);} to { opacity:1; transform: translateY(0); } }

        /* Section Header (preserve original style) */
        .section-header {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .section-header::before {
            content:'';
            position:absolute;
            top:0; left:0; right:0; height:4px;
            background: linear-gradient(90deg, var(--primary-burgundy) 0%, var(--primary-gold) 50%, var(--secondary-blue) 100%);
        }
        .section-title { font-size: 2.5rem; color: var(--primary-burgundy); margin-bottom: 12px; }
        .section-subtitle { font-size: 1.05rem; color: var(--text-light); max-width: 800px; margin: 0 auto; }

        /* Interactive grid / cards (keep original) */
        .interactive-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 20px; }
        .interactive-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 22px;
            box-shadow: var(--shadow);
            cursor:pointer;
            transition: all .28s ease;
            display:flex; flex-direction:column;
        }
        .interactive-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-hover); }
        .card-header { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
        .card-title { font-size:1.25rem; color:var(--primary-burgundy); font-weight:600; }
        .card-description { color:var(--text-light); line-height:1.6; margin-bottom:12px; }

        /* Stats grid */
        .stats-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-top: 12px; }
        .stat-card { background:var(--card-bg); border-radius:15px; padding:22px; text-align:center; box-shadow:var(--shadow); }
        .stat-number { font-size:2.2rem; font-weight:700; color:var(--primary-burgundy); display:block; }
        .stat-label { font-size:.95rem; color:var(--text-light); margin-top:6px; }

        /* Tabs - keep original style but allow animations & mobile behavior */
        .tab-container { background: var(--card-bg); border-radius: 15px; box-shadow: var(--shadow); margin-bottom: 30px; overflow: hidden; }
        .tab-nav { display:flex; background: var(--bg-light); border-bottom: 1px solid var(--border-color); }
        .tab-btn {
            flex:1; padding: 14px 16px; border:none; background:transparent; cursor:pointer; font-weight:600; transition:all .22s ease; position:relative;
            min-height: var(--touch-target);
        }
        .tab-btn.active { background: var(--card-bg); color: var(--primary-burgundy); }
        .tab-btn.active::after { content:''; position:absolute; bottom:0; left:0; right:0; height:3px; background:var(--primary-gold); }

        .tab-content { display:none; padding: 26px; animation: slideIn .34s ease; min-height: 80px; }
        .tab-content.active { display:block; }

        @keyframes slideIn { from { transform: translateX(20px); opacity:0; } to { transform: translateX(0); opacity:1; } }

        /* Modal (preserve original but ensure mobile fit) */
        .modal {
            display:none; position:fixed; top:0; left:0; right:0; bottom:0;
            background: rgba(0,0,0,0.8); z-index:2500; align-items:center; justify-content:center;
            padding: 18px;
        }
        .modal.active { display:flex; }
        .modal-content {
            background: var(--card-bg); border-radius: 20px; max-width: 900px; width:100%; max-height: 88vh; overflow-y:auto;
            position: relative; padding: 18px 22px; animation: modalSlideIn .28s ease;
        }
        @keyframes modalSlideIn { from { transform: translateY(-12px) scale(.98); opacity:0 } to { transform: none; opacity:1 } }
        .modal-header { display:flex; align-items:center; justify-content:space-between; padding-bottom: 8px; border-bottom: 1px solid var(--border-color); margin-bottom: 12px; }
        .modal-title { font-size:1.5rem; color:var(--primary-burgundy); }
        .modal-close {
            background: none; border: none; font-size: 1.35rem; width: 44px; height: 44px; border-radius:50%;
            display:inline-flex; align-items:center; justify-content:center; cursor:pointer; color:var(--text-light);
        }
        .modal-close:focus { outline: 2px solid var(--primary-burgundy); }

        /* Quick actions & other preserved styles */
        .quick-actions { display:flex; gap:15px; flex-wrap:wrap; margin:20px 0; }
        .quick-action { background:var(--primary-burgundy); color:white; padding:12px 20px; border-radius: 25px; font-weight:600; cursor:pointer; border:none; }
        .quick-action:hover { background:var(--primary-gold); color:var(--text-color); transform:translateY(-2px); }

        /* Responsive / Mobile adjustments */
        @media (max-width: 1024px) {
            .dashboard { grid-template-columns: var(--sidebar-width) 1fr; }
            .section-title { font-size:2.2rem; }
        }

        /* Mobile: collapse into single column and make the sidebar overlayed */
        @media (max-width: 768px) {
            .dashboard { grid-template-columns: 1fr; }
            .sidebar {
                position: fixed; top:0; left:0; bottom:0;
                width: var(--sidebar-mobile-width);
                transform: translateX(-110%);
                z-index: 2200;
                box-shadow: 0 8px 30px rgba(0,0,0,0.25);
            }
            .sidebar.open { transform: translateX(0); }
            .menu-toggle { display:block; position: fixed; top: 14px; left: 14px; z-index: 2600; background:var(--primary-burgundy); color:#fff; border:none; padding:10px 12px; border-radius:8px; font-size:18px; height:44px; width:44px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
            .overlay { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.45); z-index:2100; }
            .overlay.active { display:block; }
            .main-content { padding-top:60px; }
            .tab-nav { overflow-x:auto; -webkit-overflow-scrolling: touch; }
            .tab-btn { white-space:nowrap; min-width: 120px; }
            .interactive-grid { grid-template-columns: 1fr; }
            .section-header { padding: 20px; }
            .modal-content { border-radius: 12px; padding: 14px; margin: 8px; }
        }

        /* Smaller phones */
        @media (max-width: 420px) {
            .section-title { font-size:1.6rem; }
            .tab-btn { padding:10px 12px; font-size:.95rem; }
        }

        /* Make sure focus states are visible */
        a:focus, button:focus, .nav-link:focus { outline: 3px solid rgba(100,9,44,0.12); outline-offset:2px; }
    </style>
</head>
<body>

    <!-- Mobile menu toggle and overlay -->
    <button id="menuToggle" class="menu-toggle" aria-controls="sidebar" aria-expanded="false" aria-label="Open navigation">‚ò∞</button>
    <div id="overlay" class="overlay" aria-hidden="true"></div>

    <div class="dashboard" id="dashboard">

        <!-- Sidebar (kept original markup & nav items) -->
        <nav id="sidebar" class="sidebar" role="navigation" aria-label="Main navigation">
            <div class="logo-section" role="img" aria-label="CLEAR logo">
                <div class="logo" aria-hidden="true"></div>
                <div class="org-name">CLEAR</div>
                <div class="tagline">Promoting Regulatory Excellence</div>
            </div>

            <ul class="nav-menu" role="menu">
                <li class="nav-item"><a class="nav-link active" data-section="welcome" role="menuitem" tabindex="0"><span class="nav-icon">üè†</span> Welcome Hub</a></li>
                <li class="nav-item"><a class="nav-link" data-section="conferences" role="menuitem" tabindex="0"><span class="nav-icon">üìÖ</span> Conferences & Events</a></li>
                <li class="nav-item"><a class="nav-link" data-section="learning" role="menuitem" tabindex="0"><span class="nav-icon">üéì</span> Learning Center</a></li>
                <li class="nav-item"><a class="nav-link" data-section="resources" role="menuitem" tabindex="0"><span class="nav-icon">üìö</span> Resources</a></li>
                <li class="nav-item"><a class="nav-link" data-section="membership" role="menuitem" tabindex="0"><span class="nav-icon">üë•</span> Membership</a></li>
            </ul>

            <div class="social-grid" aria-hidden="false" style="margin-top:18px;">
                <a href="https://www.facebook.com/CLEARHQ/" class="social-btn facebook" target="_blank" rel="noopener" aria-label="Facebook"><img src="https://commons.wikimedia.org/wiki/Special:FilePath/2023_Facebook_icon.svg" alt="Facebook logo"></a>
                <a href="https://twitter.com/CLEARHQ" class="social-btn twitter" target="_blank" rel="noopener" aria-label="X / Twitter"><img src="https://commons.wikimedia.org/wiki/Special:FilePath/X_logo_2023_original.svg" alt="X logo"></a>
                <a href="https://www.linkedin.com/company/council-on-licensure-enforcement-and-regulation-clear-/" class="social-btn linkedin" target="_blank" rel="noopener" aria-label="LinkedIn"><img src="https://upload.wikimedia.org/wikipedia/commons/8/81/LinkedIn_icon.svg" alt="LinkedIn logo"></a>
            </div>
        </nav>

        <!-- MAIN -->
        <main class="main-content" role="main">
            <div class="body">

                <!-- Welcome Section -->
                <section id="welcome" class="content-section active" aria-labelledby="welcomeTitle">
                    <div class="section-header">
                        <h1 id="welcomeTitle" class="section-title">CLEAR-ly Connected</h1>
                        <p class="section-subtitle">Getting the Most from the CLEAR Community</p>
                    </div>

                    <!-- Responsive Vimeo embed (preserve original src) -->
                    <div style="max-width: 700px; margin:0 auto 18px;">
                        <div style="padding-top:56.25%; position:relative; height:0;">
                            <iframe
                                src="https://player.vimeo.com/video/1115627510?h=1bdfdfb135&badge=0&autopause=0&player_id=0&app_id=58479"
                                frameborder="0"
                                allow="fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
                                referrerpolicy="strict-origin-when-cross-origin"
                                title="CLEARly Connected Introduction"
                                loading="lazy"
                                style="position:absolute; inset:0; width:100%; height:100%;">
                            </iframe>
                        </div>
                    </div>

                    <!-- Tabs (AboutUs / Mission / History) - preserved IDs -->
                    <div class="tab-container" id="mainTabs" aria-label="About tabs">
                        <div class="tab-nav" role="tablist" aria-label="About sections">
                            <button class="tab-btn active" data-tab="AboutUs" role="tab" aria-selected="true" aria-controls="AboutUs" tabindex="0">About Us</button>
                            <button class="tab-btn" data-tab="Mission" role="tab" aria-selected="false" aria-controls="Mission" tabindex="0">Our Mission</button>
                            <button class="tab-btn" data-tab="History" role="tab" aria-selected="false" aria-controls="History" tabindex="0">Our History</button>
                        </div>

                        <div id="AboutUs" class="tab-content active" role="tabpanel" aria-hidden="false">
                            <div style="display:flex;align-items:center;gap:16px;margin-bottom:18px;">
                                <img src="https://assets-002.noviams.com/novi-file-uploads/clear/structure/clearlogo.png" alt="" style="width:72px;height:auto;">
                                <h2 style="color:var(--primary-burgundy);font-size:1.25rem;margin:0;">The Council on Licensure, Enforcement and Regulation (CLEAR)</h2>
                            </div>
                            <p style="text-align:justify;line-height:1.6;font-size:1.03rem;">
                                CLEAR promotes regulatory excellence through conferences, educational programs, webinars, seminars and symposia. The organization provides networking opportunities, publications, and research services for those involved with, or affected by, professional and occupational regulation.
                            </p>
                        </div>

                        <div id="Mission" class="tab-content" role="tabpanel" aria-hidden="true">
                            <h3 style="color: var(--primary-gold);">CLEAR meets its mission through:</h3>
                            <ul style="padding-left:20px;margin-top:12px;">
                                <li>Conferences and training</li>
                                <li>Publications</li>
                                <li>Answering inquiries</li>
                                <li>Consulting</li>
                                <li>Providing networking opportunities</li>
                            </ul>
                        </div>

                        <div id="History" class="tab-content" role="tabpanel" aria-hidden="true">
                            <img src="https://assets-002.noviams.com/novi-file-uploads/clear/TalentLMS/OurHistory.svg" alt="CLEAR history graphic" style="width:100%;height:auto;margin-bottom:12px;">
                            <p style="text-align:justify;line-height:1.6;">
                                CLEAR was conceived in 1980 as a resource for any entity or individual involved in the licensure, non-voluntary certification or registration of regulated occupations and professions...
                            </p>
                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="stats-grid" aria-hidden="false">
                        <div class="stat-card">
                            <span class="stat-number">10,000+</span>
                            <div class="stat-label">Members</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">45</span>
                            <div class="stat-label">Years of Excellence</div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">10+</span>
                            <div class="stat-label">Member Countries</div>
                        </div>
                    </div>
                </section>

                <!-- Conferences Section -->
                <section id="conferences" class="content-section" aria-labelledby="conferencesTitle">
                    <div class="section-header">
                        <h2 id="conferencesTitle" class="section-title">Conferences & Events</h2>
                        <p class="section-subtitle">Connect with regulatory professionals worldwide through our signature events</p>
                    </div>

                    <div style="max-width:700px;margin:0 auto;">
                        <div style="padding-top:56.25%;position:relative;height:0;">
                            <iframe
                                src="https://player.vimeo.com/video/1115702731?h=b0d801e2d5&badge=0&autopause=0&player_id=0&app_id=58479"
                                frameborder="0" allow="fullscreen; picture-in-picture"
                                referrerpolicy="strict-origin-when-cross-origin"
                                title="Conferences and Events"
                                loading="lazy"
                                style="position:absolute;inset:0;width:100%;height:100%;">
                            </iframe>
                        </div>
                    </div>

                    <div style="text-align:center;margin-top:18px;">
                        <button class="quick-action" onclick="window.open('https://www.clearhq.org/events/2026-midyear-meeting','_blank')">Midyear Business Meeting Registration</button>
                    </div>
                </section>

                <!-- Learning Center Section -->
                <section id="learning" class="content-section" aria-labelledby="learningTitle">
                    <div class="section-header">
                        <h2 id="learningTitle" class="section-title">Learning Center</h2>
                        <p class="section-subtitle">Courses, webinars, and resources for professional regulation</p>
                    </div>

                    <div class="tab-container" style="margin-bottom:20px;">
                        <div class="tab-nav" role="tablist">
                            <button class="tab-btn active" data-tab="webinars" role="tab" aria-selected="true">Webinars</button>
                            <button class="tab-btn" data-tab="podcast" role="tab" aria-selected="false">Podcast</button>
                            <button class="tab-btn" data-tab="reports" role="tab" aria-selected="false">Reports</button>
                        </div>

                        <div id="webinars" class="tab-content active">
                            <div class="interactive-grid">
                                <div class="interactive-card">
                                    <div class="card-header">
                                        <div class="card-title">CLEAR Call Webinar Series</div>
                                    </div>
                                    <p class="card-description">One-hour presentations on current topics. Recordings available for purchase.</p>
                                    <div style="margin-top:auto;">
                                        <button class="card-action" onclick="window.open('https://www.clearhq.org/events/webinars','_blank')">Webinar Calendar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="podcast" class="tab-content">
                            <div class="interactive-grid">
                                <div class="interactive-card">
                                    <div class="card-header">
                                        <div class="card-title">CLEAR Podcast Series</div>
                                    </div>
                                    <p class="card-description">Monthly episodes discussing regulatory topics.</p>
                                    <div style="margin-top:auto;">
                                        <button class="card-action" onclick="window.open('https://www.clearhq.org/podcast','_blank')">Listen Now</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="reports" class="tab-content">
                            <div class="interactive-grid">
                                <div class="interactive-card">
                                    <div class="card-header">
                                        <div class="card-title">Professional Licensing Report</div>
                                    </div>
                                    <p class="card-description">Bi-monthly newsletter covering key developments.</p>
                                    <div style="margin-top:auto;">
                                        <button class="card-action" onclick="window.open('https://www.clearhq.org/CLEAR_Store/professional-licensing-report-sub','_blank')">Subscribe</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Resources Section -->
                <section id="resources" class="content-section" aria-labelledby="resourcesTitle">
                    <div class="section-header">
                        <h2 id="resourcesTitle" class="section-title">CLEAR Resources</h2>
                        <p class="section-subtitle">Publications, tools, and insights for regulatory excellence</p>
                    </div>

                    <div style="max-width:700px;margin:0 auto;">
                        <div style="padding-top:56.25%;position:relative;height:0;">
                            <iframe
                                src="https://player.vimeo.com/video/1115966657?h=ba98b2ccfc&badge=0&autopause=0&player_id=0&app_id=58479"
                                frameborder="0" allow="fullscreen; picture-in-picture"
                                referrerpolicy="strict-origin-when-cross-origin"
                                title="Resources"
                                loading="lazy"
                                style="position:absolute;inset:0;width:100%;height:100%;">
                            </iframe>
                        </div>
                    </div>

                    <br>

                    <div class="interactive-grid">
                        <div class="interactive-card" onclick="window.open('https://www.clearhq.org/CLEAR_Store/professional-licensing-report-sub','_blank')">
                            <div class="card-title">Professional Licensing Report</div>
                            <p class="card-description">Bi-monthly newsletter covering key developments and trends.</p>
                            <div style="margin-top:auto;">
                                <button class="card-action">Subscribe</button>
                                <span class="card-badge">Newsletter</span>
                            </div>
                        </div>

                        <div class="interactive-card" onclick="window.open('https://www.clearhq.org/podcast','_blank')">
                            <div class="card-title">CLEAR Podcast Series</div>
                            <p class="card-description">Monthly episodes with diverse perspectives on professional regulation topics.</p>
                            <div style="margin-top:auto;">
                                <button class="card-action">Listen Now</button>
                                <span class="card-badge">Audio</span>
                            </div>
                        </div>

                        <div class="interactive-card" onclick="window.open('https://www.clearhq.org/journal-of-prof-reg','_blank')">
                            <div class="card-title">Journal of Professional Regulation</div>
                            <p class="card-description">Research and articles on trends in regulation.</p>
                            <div style="margin-top:auto;">
                                <button class="card-action">Visit Journal</button>
                                <span class="card-badge">Journal</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Membership Section -->
                <section id="membership" class="content-section" aria-labelledby="membershipTitle">
                    <div class="section-header">
                        <h2 id="membershipTitle" class="section-title">Membership</h2>
                        <p class="section-subtitle">Join a global community of regulatory professionals</p>
                    </div>

                    <p style="line-height:1.6;">Membership information and join links live on the official CLEAR site. Contact membership@clearhq.org for details.</p>
                    <div style="margin-top:18px;">
                        <button class="quick-action" onclick="openContactEmail()">Contact Membership</button>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <!-- Example Modals (preserved structure, accessible close buttons) -->
    <div id="modal-2025" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <div class="modal-title">2025 Annual Conference</div>
                <button class="modal-close" aria-label="Close modal" data-modal="modal-2025">‚úï</button>
            </div>
            <div class="modal-body">
                <p>Details about the 2025 event.</p>
            </div>
        </div>
    </div>

    <div id="modal-2026" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <div class="modal-title">2026 Annual Conference</div>
                <button class="modal-close" aria-label="Close modal" data-modal="modal-2026">‚úï</button>
            </div>
            <div class="modal-body">
                <p>Details about the 2026 event.</p>
            </div>
        </div>
    </div>

    <!-- Keep the Vimeo player API intact if your original used it -->
    <script src="https://player.vimeo.com/api/player.js" async></script>

    <script>
        /* ----------------------
           Helper & mobile features
           ---------------------- */

        // DOM references
        const sidebar = document.getElementById('sidebar');
        const menuToggle = document.getElementById('menuToggle');
        const overlay = document.getElementById('overlay');
        const navLinks = sidebar.querySelectorAll('.nav-link');

        // track state
        let sidebarOpen = false;
        function setSidebarOpen(open) {
            sidebarOpen = !!open;
            if (sidebarOpen) {
                sidebar.classList.add('open');
                overlay.classList.add('active');
                menuToggle.setAttribute('aria-expanded','true');
                overlay.setAttribute('aria-hidden','false');
            } else {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
                menuToggle.setAttribute('aria-expanded','false');
                overlay.setAttribute('aria-hidden','true');
            }
        }

        menuToggle && menuToggle.addEventListener('click', (e) => {
            setSidebarOpen(!sidebarOpen);
        });
        overlay && overlay.addEventListener('click', () => setSidebarOpen(false));

        // Auto-close sidebar when nav tapped on small screens
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                // original navigation relies on data-section attribute; initNavigation binds behavior later
                if (window.innerWidth <= 768) {
                    setSidebarOpen(false);
                }
            });
        });

        // Keyboard: ESC should close sidebar & modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                setSidebarOpen(false);
                // close any open modals (initModals also handles this)
                document.querySelectorAll('.modal.active').forEach(m => closeModalByEl(m));
            }
        });

        /* ----------------------
           Original navigation system (restored & preserved)
           ---------------------- */
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    // prevent default if it's an anchor
                    e.preventDefault?.();

                    const targetSection = link.dataset.section;
                    if (!targetSection) return;

                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');

                    // Show target section
                    contentSections.forEach(section => section.classList.remove('active'));
                    const targetEl = document.getElementById(targetSection);
                    if (targetEl) {
                        targetEl.classList.add('active');
                        // For accessibility, move focus to section heading
                        const heading = targetEl.querySelector('.section-title') || targetEl.querySelector('h2, h1');
                        heading && heading.focus && heading.focus();
                    }

                    // Close sidebar on mobile
                    if (window.innerWidth <= 768) setSidebarOpen(false);
                });

                // allow keyboard navigation via Enter/Space
                link.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        link.click();
                    }
                });
            });
        }

        /* ----------------------
           Original tab system (restored & preserved) + animated slide support
           ---------------------- */
        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');

            // Track currently active index per tab container (support multiple tab containers)
            const containers = document.querySelectorAll('.tab-container');
            containers.forEach(container => {
                const buttons = container.querySelectorAll('.tab-btn');
                const contents = container.querySelectorAll('.tab-content');
                let lastIndex = [...buttons].findIndex(b => b.classList.contains('active')) || 0;

                // Utility to switch with directional animation
                function switchToIndex(newIndex) {
                    if (newIndex < 0 || newIndex >= buttons.length || newIndex === lastIndex) return;

                    const direction = newIndex > lastIndex ? 'Right' : 'Left';
                    // Remove active from all
                    buttons.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected','false');});
                    contents.forEach(c => { c.classList.remove('active'); c.setAttribute('aria-hidden','true'); c.style.animation=''; });

                    // Activate new
                    buttons[newIndex].classList.add('active');
                    buttons[newIndex].setAttribute('aria-selected','true');
                    contents[newIndex].classList.add('active');
                    contents[newIndex].setAttribute('aria-hidden','false');

                    // direction-aware animation
                    const animName = direction === 'Right' ? 'slideIn' : 'slideIn';
                    contents[newIndex].style.animation = `${animName} 0.36s ease`;

                    lastIndex = newIndex;
                }

                // click handlers for each button
                buttons.forEach((btn, i) => {
                    btn.addEventListener('click', (evt) => {
                        // if this button used data-tab -> select by id
                        const targetTab = btn.dataset.tab;
                        if (targetTab) {
                            // Find the index of content id
                            const idx = [...contents].findIndex(c => c.id === targetTab);
                            if (idx >= 0) { switchToIndex(idx); return; }
                        }
                        switchToIndex(i);
                    });

                    btn.addEventListener('keydown', (e) => {
                        if (e.key === 'ArrowRight') { switchToIndex(i+1); e.preventDefault(); }
                        if (e.key === 'ArrowLeft')  { switchToIndex(i-1); e.preventDefault(); }
                    });
                });

                // Swipe capability for this container (mobile)
                addSwipeListener(container, {
                    onSwipeLeft: () => switchToIndex(Math.min(lastIndex + 1, buttons.length -1)),
                    onSwipeRight: () => switchToIndex(Math.max(lastIndex - 1, 0))
                });
            });

            // Also support legacy code where simple data-tab IDs exist (keeps your original behavior)
            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetTab = btn.dataset.tab;
                    const container = btn.closest('.tab-container');
                    if (!container || !targetTab) return;
                    // Update active tab button within container
                    container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    // Show content
                    container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    const targetContent = container.querySelector(`#${targetTab}`);
                    if (targetContent) targetContent.classList.add('active');
                });
            });
        }

        /* ----------------------
           Modal functions (restored & preserved)
           - close on click outside
           - close on ESC (global)
           - swipe down to close (mobile)
           ---------------------- */
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.add('active');
            modal.setAttribute('aria-hidden','false');
            // lock body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeModalById(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.remove('active');
            modal.setAttribute('aria-hidden','true');
            document.body.style.overflow = 'auto';
        }
        function closeModalByEl(modalEl) {
            if (!modalEl) return;
            modalEl.classList.remove('active');
            modalEl.setAttribute('aria-hidden','true');
            document.body.style.overflow = 'auto';
        }

        function initModals() {
            // close buttons
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const target = e.currentTarget.dataset.modal;
                    if (target) closeModalById(target);
                    else {
                        // find the closest modal
                        const modal = e.currentTarget.closest('.modal');
                        closeModalByEl(modal);
                    }
                });
            });

            // clicking outside modal-content closes modal
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModalByEl(modal);
                });

                // close on swipe down inside modal content
                const content = modal.querySelector('.modal-content');
                if (content) {
                    addSwipeListener(content, {
                        onSwipeDown: () => closeModalByEl(modal)
                    });
                }
            });

            // ESC handled globally above
        }

        /* ----------------------
           Utility: opens mailto for membership contact
           (preserved from your file)
           ---------------------- */
        function openContactEmail() {
            const subject = encodeURIComponent('CLEAR Contact Request');
            const body = encodeURIComponent('Hello,\n\nI would like to get in touch regarding:\n\n\nBest regards,');
            window.open(`mailto:membership@clearhq.org?subject=${subject}&body=${body}`);
        }

        /* ----------------------
           Swipe utility used for tabs/modals/sidebar
           Accepts callbacks: onSwipeLeft, onSwipeRight, onSwipeUp, onSwipeDown
           ---------------------- */
        function addSwipeListener(el, callbacks = {}) {
            if (!el) return;
            let startX = 0, startY = 0;
            let startTime = 0;
            const threshold = 50; // min px
            el.addEventListener('touchstart', function(e) {
                const t = e.touches[0];
                startX = t.clientX; startY = t.clientY;
                startTime = Date.now();
            }, {passive:true});

            el.addEventListener('touchend', function(e) {
                if (!e.changedTouches || !e.changedTouches[0]) return;
                const t = e.changedTouches[0];
                const dx = t.clientX - startX;
                const dy = t.clientY - startY;
                const absX = Math.abs(dx), absY = Math.abs(dy);
                const duration = Date.now() - startTime;
                // require minimum distance
                if (absX > absY && absX > threshold) {
                    if (dx > 0) callbacks.onSwipeRight && callbacks.onSwipeRight();
                    else callbacks.onSwipeLeft && callbacks.onSwipeLeft();
                } else if (absY > absX && absY > threshold) {
                    if (dy > 0) callbacks.onSwipeDown && callbacks.onSwipeDown();
                    else callbacks.onSwipeUp && callbacks.onSwipeUp();
                }
            }, {passive:true});
        }

        /* ----------------------
           Swipe-from-left-edge to open sidebar & swipe-left to close
           Works only on mobile widths
           ---------------------- */
        addSwipeListener(document.body, {
            onSwipeRight: () => {
                // get first touch x available via a quick check
                // only open if starting near left edge and closed
                // Note: due to passive listeners we can't read touchstart's startX here easily, so instead ensure small screen and closed state
                if (window.innerWidth <= 768 && !sidebarOpen) {
                    setSidebarOpen(true);
                }
            },
            onSwipeLeft: () => {
                if (window.innerWidth <= 768 && sidebarOpen) setSidebarOpen(false);
            }
        });

        /* ----------------------
           Initialize everything on DOM ready (matching your original)
           ---------------------- */
        document.addEventListener('DOMContentLoaded', () => {
            // Run original-style inits
            initNavigation();
            initTabs();
            initModals();

            // Wire up examples: if your site had onclick handlers on cards to open modals, re-add here:
            // Example: make clicking the interactive card in "Conferences" open modal-2025 etc.
            // This preserves behavior similar to your previous versions ‚Äî change selectors as needed.
            document.querySelectorAll('.interactive-card').forEach((card, idx) => {
                // if a card has explicit onclick in original, it will still work; this is just a safe default.
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); }
                });
            });

            // Accessibility: focusable section titles when switching content
            document.querySelectorAll('.section-title').forEach(h => { h.setAttribute('tabindex','-1'); });

            console.log('CLEAR Interactive Hub initialized successfully!');
        });
    </script>
</body>
</html>
